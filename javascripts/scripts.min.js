;(function(a, b) {
    "use strict";
    var c = b.Modernizr,
        d = a("body");
    a.DLMenu = function(b, c) {
        this.$el = a(c), this._init(b)
    }, a.DLMenu.defaults = {
        animationClasses: {
            classin: "dl-animate-in-1",
            classout: "dl-animate-out-1"
        },
        onLevelClick: function() {
            return !1
        },
        onLinkClick: function() {
            return !1
        }
    }, a.DLMenu.prototype = {
        _init: function(b) {
            this.options = a.extend(!0, {}, a.DLMenu.defaults, b), this._config();
            var d = {
                    WebkitAnimation: "webkitAnimationEnd",
                    OAnimation: "oAnimationEnd",
                    msAnimation: "MSAnimationEnd",
                    animation: "animationend"
                },
                e = {
                    WebkitTransition: "webkitTransitionEnd",
                    MozTransition: "transitionend",
                    OTransition: "oTransitionEnd",
                    msTransition: "MSTransitionEnd",
                    transition: "transitionend"
                };
            this.animEndEventName = d[c.prefixed("animation")] + ".dlmenu", this.transEndEventName = e[c.prefixed("transition")] + ".dlmenu", this.supportAnimations = c.cssanimations, this.supportTransitions = c.csstransitions, this._initEvents()
        },
        _config: function() {
            this.open = !1, this.$trigger = this.$el.children(".dl-trigger"), this.$menu = this.$el.children("ul.dl-menu"), this.$menuitems = this.$menu.find("li:not(.dl-back)"), this.$el.find("ul.dl-submenu").prepend('<li class="dl-back"><a href="#">back</a></li>'), this.$back = this.$menu.find("li.dl-back")
        },
        _initEvents: function() {
            var b = this;
            this.$trigger.on("click.dlmenu", function() {
                return b.open ? b._closeMenu() : b._openMenu(), !1
            }), this.$menuitems.on("click.dlmenu", function(c) {
                c.stopPropagation();
                var d = a(this),
                    e = d.children("ul.dl-submenu");
                if (e.length > 0) {
                    var f = e.clone().css("opacity", 0).insertAfter(b.$menu),
                        g = function() {
                            b.$menu.off(b.animEndEventName).removeClass(b.options.animationClasses.classout).addClass("dl-subview"), d.addClass("dl-subviewopen").parents(".dl-subviewopen:first").removeClass("dl-subviewopen").addClass("dl-subview"), f.remove()
                        };
                    return setTimeout(function() {
                        f.addClass(b.options.animationClasses.classin), b.$menu.addClass(b.options.animationClasses.classout), b.supportAnimations ? b.$menu.on(b.animEndEventName, g) : g.call(), b.options.onLevelClick(d, d.children("a:first").text())
                    }), !1
                }
                b.options.onLinkClick(d, c)
            }), this.$back.on("click.dlmenu", function() {
                var c = a(this),
                    d = c.parents("ul.dl-submenu:first"),
                    e = d.parent(),
                    f = d.clone().insertAfter(b.$menu),
                    g = function() {
                        b.$menu.off(b.animEndEventName).removeClass(b.options.animationClasses.classin), f.remove()
                    };
                return setTimeout(function() {
                    f.addClass(b.options.animationClasses.classout), b.$menu.addClass(b.options.animationClasses.classin), b.supportAnimations ? b.$menu.on(b.animEndEventName, g) : g.call(), e.removeClass("dl-subviewopen");
                    var a = c.parents(".dl-subview:first");
                    a.is("li") && a.addClass("dl-subviewopen"), a.removeClass("dl-subview")
                }), !1
            })
        },
        closeMenu: function() {
            this.open && this._closeMenu()
        },
        _closeMenu: function() {
            var a = this,
                b = function() {
                    a.$menu.off(a.transEndEventName), a._resetMenu()
                };
            this.$menu.removeClass("dl-menuopen"), this.$menu.addClass("dl-menu-toggle"), this.$trigger.removeClass("dl-active"), this.supportTransitions ? this.$menu.on(this.transEndEventName, b) : b.call(), this.open = !1
        },
        openMenu: function() {
            this.open || this._openMenu()
        },
        _openMenu: function() {
            var b = this;
            d.off("click").on("click.dlmenu", function() {
                b._closeMenu()
            }), this.$menu.addClass("dl-menuopen dl-menu-toggle").on(this.transEndEventName, function() {
                a(this).removeClass("dl-menu-toggle")
            }), this.$trigger.addClass("dl-active"), this.open = !0
        },
        _resetMenu: function() {
            this.$menu.removeClass("dl-subview"), this.$menuitems.removeClass("dl-subview dl-subviewopen")
        }
    };
    var e = function(a) {
        b.console && b.console.error(a)
    };
    a.fn.dlmenu = function(b) {
        if ("string" == typeof b) {
            var c = Array.prototype.slice.call(arguments, 1);
            this.each(function() {
                var d = a.data(this, "dlmenu");
                return d ? a.isFunction(d[b]) && "_" !== b.charAt(0) ? (d[b].apply(d, c), void 0) : (e("no such method '" + b + "' for dlmenu instance"), void 0) : (e("cannot call methods on dlmenu prior to initialization; attempted to call method '" + b + "'"), void 0)
            })
        } else this.each(function() {
            var c = a.data(this, "dlmenu");
            c ? c._init() : c = a.data(this, "dlmenu", new a.DLMenu(b, this))
        });
        return this
    }
})(jQuery, window);

$(function() {
    $("#dl-menu").dlmenu({
        animationClasses: {
            classin: "dl-animate-in",
            classout: "dl-animate-out"
        }
    })
}), $(".close-menu").click(function() {
    $(".menu").toggleClass("disabled"), $(".links").toggleClass("enabled")
}), $(".about").click(function() {
    $("#about").css("display", "block")
}), $(".close-about").click(function() {
    $("#about").css("display", "")
});
