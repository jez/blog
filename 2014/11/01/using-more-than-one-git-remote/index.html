<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">
<head>
    <meta charset="utf-8" />
  <meta name="generator" content="pandoc-markdown-css-theme" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<meta name="author" content="Jake Zimmerman">
<meta name="dcterms.date" content="2014-11-01 18:12:35 -0400">
<meta name="description" content="An overview of how multiple Git remotes can be used to synchronize code distributed in a read-only Git repo">
<title>Using Multiple Git Remotes – Jake Zimmerman</title>

  <link rel="stylesheet" href="/assets/css/theme.css">
<link rel="stylesheet" href="/assets/css/skylighting-solarized-theme.css">




  
    <link rel="apple-touch-icon-precomposed" href="/assets/img/touch-icon.png">
  
    <link rel="icon" sizes="32x32" href="/assets/img/favicon@2x.png">
  
    <link rel="icon" sizes="16x16" href="/assets/img/favicon.png">
  
    <link rel="alternate" type="application/atom+xml" href="/atom.xml">
  
    <link rel="stylesheet" href="/assets/css/extra.css">
  




</head>
<body>
  




  <header>
    <h1 class="title">Using Multiple Git Remotes</h1>
    <blockquote class="metadata">
    <p class="date before-toc"><time datetime="2014-11-01 18:12:35 -0400">November 1, 2014</time></p>
    </blockquote>
  </header>


  <nav id="TOC" role="doc-toc">
  <a href="/">Home</a><br>
  <strong>Contents</strong><label for="contents">⊕</label>
  <input type="checkbox" id="contents">
  <ul>
  <li><a href="#quick-overview-remotes">Quick Overview: Remotes</a></li>
  <li><a href="#scenario-working-with-code-in-15-150">Scenario: Working with Code in 15-150</a></li>
  <li><a href="#more-applications">More Applications</a></li>
  </ul>
</nav>

<main>
<p>Quite often when using git, you only need to use one remote: <code>origin</code>. All your pushes and pulls communicate with this one host. However, there are many occasions when using multiple Git remotes is incredibly handy.</p>
<!-- more -->
<h1 id="quick-overview-remotes">Quick Overview: Remotes</h1>
<p>If you haven’t already, I strongly recommend that you check out these two Git resources in your free time:</p>
<ul>
<li><a href="http://pcottle.github.io/learnGitBranching/"><strong>Learn Git Branching</strong></a>, an interactive walkthrough of some powerful Git features</li>
<li><a href="https://wildlyinaccurate.com/a-hackers-guide-to-git"><strong>A Hacker’s Guide to Git</strong></a>, an explanation of Git by “taking a peek under the hood”</li>
</ul>
<p>In this article, I’ll only be talking about remotes. Remotes are basically “mirrors” of a branch that you have locally, but on a different computer.</p>
<h1 id="scenario-working-with-code-in-15-150">Scenario: Working with Code in 15-150</h1>
<p>At CMU, the class 15-150 distributes its starter code in a beautiful way: using Git! This opens up a number of things we can take advantage of, but there’s one thing in particular we can do using multiple git remotes.</p>
<p>In 15-150, the code is distribute in a read-only Git repo. If we want a place where we can push and pull our changes, we’ll need to create our own <em>bare repo</em> (a repo that’s used just for pushing and pulling). You’ll note that I said push <em>and pull</em>. The reason why I want to be able to pull is because I want to have 2 clones of this repo: one on the CMU Andrew Unix servers (where the 15-150 code is hosted), and one on my laptop, where there’s no network latency to edit files in Vim.</p>
<p>To achieve this setup, the first thing we’ll do is set up the bare repo. The best place to put a bare repo is on a server so that you can always access your code. So from Andrew, I’ll run the commands:</p>
<figure>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># (unix.andrew.cmu.edu)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `git clone --bare` is basically GitHub&#39;s &quot;Fork&quot; feature,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># if you&#39;re familiar with that</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>$ <span class="fu">git</span> clone --bare ~/private/gitrepos/15150</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># make sure you clone this into your private folder!</span></span></code></pre></div>
<figcaption>
Initialize the Bare Repo
</figcaption>
</figure>
<p>This creates a bare repo initialized with all the 15-150 content which I can clone in two different ways: one for if I’m on Andrew, one if I’m on my laptop.</p>
<figure>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># (unix.andrew.cmu.edu)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Clone over Unix file path to new folder ~/private/15150</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>$ <span class="fu">git</span> clone ~/private/gitrepos/15150 ~/private/15150</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># -- and/or --</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># (my laptop)</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Clone over ssh (using ssh alias, i.e., if you use `ssh andrew`)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>$ <span class="fu">git</span> clone ssh://andrew:/afs/andrew/usr/jezimmer/private/15150</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># -- or --</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Clone over ssh (without ssh alias,</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">#            i.e., if you use `ssh jezimmer@unix.andrew.cmu.edu`)</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>$ <span class="fu">git</span> clone ssh://jezimmer@unix.andrew.cmu.edu:/afs/andrew/usr/jezimmer/private/15150</span></code></pre></div>
<figcaption>
Clone New Remote
</figcaption>
</figure>
<p>To throw in a few graphics, our setup looks like this right now:</p>
<p><a href="/assets/img/multiple-remotes-1.svg"><img src="/assets/img/multiple-remotes-1.svg" /></a></p>
<p>I’m representing bare repos as clouds and clones of those repos as squares, with arrows representing whether code can flow from one place to the next. As you can see, to send code back and forth between Andrew and my laptop, I can just push in one place and pull in the other.</p>
<p>The one thing missing from our picture is the original handout repo. How will we get updates as the homeworks are released? The last piece involves setting this up.</p>
<figure>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Add the 15-150 handout remote so we can get starter code, etc.</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co"># (unix.andrew.cmu.edu)</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co"># A common name for the second remote is &quot;upstream&quot;, though you could also</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co"># call this remote &quot;handout&quot; if that would be easier to keep straight</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>$ <span class="bu">cd</span> ~/private/15150</span>
<span id="cb3-7"><a href="#cb3-7"></a>$ <span class="fu">git</span> remote add upstream /afs/andrew/course/15/150/handout</span>
<span id="cb3-8"><a href="#cb3-8"></a></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co"># -- and/or --</span></span>
<span id="cb3-10"><a href="#cb3-10"></a></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co"># (my laptop)</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co"># Add remote over ssh with alias</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>$ <span class="fu">git</span> remote add upstream ssh://andrew:/afs/andrew/course/15/150/handout</span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co"># -- or --</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co"># Add remote over ssh without alias</span></span>
<span id="cb3-17"><a href="#cb3-17"></a>$ <span class="fu">git</span> remote add upstream ssh://jezimmer@unix.andrew.cmu.edu:/afs/andrew/course/15/150/handout</span></code></pre></div>
<figcaption>
Add Handout Remote
</figcaption>
</figure>
<p>Once we run those two lines, our setup looks like this, where arrows point in the direction data can flow:</p>
<p><a href="/assets/img/multiple-remotes-2.svg"><img src="/assets/img/multiple-remotes-2.svg" /></a></p>
<p>After this, we’re able to run <code>git pull upstream master</code> to get the 15-150 starter code as it’s released. I find this model particularly useful for all my classes, even the ones that don’t distribute their code using Git. Having code both on Andrew and on my local machine is a generally handy configuration, and using Git to push the code around to the right places makes my workflow simple.</p>
<p>As always, let me know if something was unclear or incorrect in the comments!</p>
<h1 id="more-applications">More Applications</h1>
<p>There are plenty other applications of using multiple remotes with Git. Perhaps the most common is to use them with the <a href="https://help.github.com/articles/fork-a-repo/"><strong>GitHub forking model</strong></a>, which is useful when collaborating on a software development project with others. You can use multiple remotes to do things like resolve merge conflicts in pull requests and to keep your fork up to date with the original repo.</p>
</main>


    <footer class="signoff">
      <p>
        More like this:
        
          <span class="smallcaps"><strong><a href="/categories/#git">git</a></strong></span>
        
      </p>
      <p><a href="/">← Return home</a></p>
    </footer>
  
    <script src="/assets/js/enable_checkboxes.js"></script>

  



</body>
</html>

