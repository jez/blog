<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">
<head>
    <meta charset="utf-8" />
  <meta name="generator" content="pandoc-markdown-css-theme" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<meta name="author" content="Jake Zimmerman">
<meta name="dcterms.date" content="2017-08-31 22:38:43 -0700">
<meta name="description" content="I prefer to let the language I'm using think on my behalf as much as possible. Ideally, the language is rich enough that the proof of correctness is inherent in the code I've written. Even when I use looser languages, these principled languages inform the structure of my code.
">
<title>If, Else, & Purity – Jake Zimmerman</title>

  <link rel="stylesheet" href="/assets/css/theme.css">
<link rel="stylesheet" href="/assets/css/skylighting-solarized-theme.css">




  
    <link rel="apple-touch-icon-precomposed" href="/assets/img/touch-icon.png">
  
    <link rel="icon" sizes="32x32" href="/assets/img/favicon@2x.png">
  
    <link rel="icon" sizes="16x16" href="/assets/img/favicon.png">
  




</head>
<body>
  




  <header>
    <h1 class="title">If, Else, & Purity</h1>
    <blockquote class="metadata">
    <p class="date before-toc"><time datetime="2017-08-31 22:38:43 -0700">August 31, 2017</time></p>
    </blockquote>
  </header>


  <nav id="TOC" role="doc-toc">
  <a href="/">← Return home</a><br>
</nav>

<main>
<p>I prefer to let the language I’m using think on my behalf as much as possible. Ideally, the language is rich enough that the proof of correctness is inherent in the code I’ve written. Even when I use looser languages, these principled languages inform the structure of my code. To make this a bit more let’s turn our focus to <code>if</code>, <code>else</code>, and purity.</p>
<!-- more -->
<p>A cool way to understand purity is using what’s known as a “modal separation.” This is a really fancy way to say that we have <span class="smallcaps"><strong>expressions</strong></span> which are pure and always evaluate to a value, alongside <span class="smallcaps"><strong>commands</strong></span> which are impure and are executed for their side effects. If you’ve ever used Haskell, you’re already familiar with this notion—we only need <code>do</code> notation when we need to write impure (or “monadic”) code.</p>
<p>In an expression language, every <code>if</code> <strong>must</strong> have an <code>else</code>; for the entire <code>if</code> expression to be used as a value, both branches must in turn evaluate to values. It’s only when we move to a language with commands where it makes sense to allow omitting the <code>else</code> branch. <code>if</code> expressions are not some abstract concept; chances are you’ve encountered them under the name “the ternary operator.”</p>
<p>An <code>if</code> <strong>statement</strong> (as opposed to an <code>if</code> expression) is a command; it’s useful for running side-effectful code. Sometimes, we don’t want one of the branches to have any side effects (for example, because the state of the world doesn’t need to be changed). Languages with commands allow omitting the <code>else</code>.</p>
<p>What does this mean for us? Since expression languages form the basis for purity, every pure function can be written where the <code>if</code> is matched with an <code>else</code>. Put another way, an unmatched <code>if</code> is a likely indicator that the code I’ve written is impure.</p>
<p>This makes me more aware of when I’m dealing with impure code. For example, I might want to factor out as much of the pure code into a separate helper function. There’s a time and a place for impure code. But since pure code is more composable and easier to test, it’s best to factor the impure code out whenever possible.</p>
<p>In a principled language, there’s a distinction between <code>if</code> expressions and <code>if</code> statements. On the other hand, some language only have one, or they blur the line between the two. We can draw upon our experiences with languages that are rigorous about minutia like this to better inform how we write clean code.</p>
<!-- vim:tw=72
-->
</main>


    <footer class="signoff">
      <p>
        More like this:
        
          <span class="smallcaps"><strong><a href="/categories/#programming">programming</a></strong></span>, 
        
          <span class="smallcaps"><strong><a href="/categories/#fragment">fragment</a></strong></span>, 
        
          <span class="smallcaps"><strong><a href="/categories/#types">types</a></strong></span>
        
      </p>
      <p><a href="/">← Return home</a></p>
    </footer>
  
    <script>
  ;(function() {
    // Non-essential if user has JavaScript off. Just makes checkboxes look nicer.
    var selector = '.task-list > li > input[type="checkbox"]';
    var checkboxes = document.querySelectorAll(selector);
    Array.from(checkboxes).forEach((checkbox) => {
      var wasChecked = checkbox.checked;
      checkbox.disabled = false;
      checkbox.addEventListener('click', (ev) => {ev.target.checked = wasChecked});
    });
  })();
  </script>

  



</body>
</html>

